<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Dead Souls Admin FAQ</title></head>

<body>
<pre><big><big><span style="font-weight: bold;">Dead Souls Admin FAQ, v1</span></big><br><br>Written by Cratylus @ Frontiers, October 2005<span style="font-weight: bold; text-decoration: underline;"><br><br></span>Note: commands are displayed in boldface, like this: <span style="font-weight: bold;">ls -a</span><span style="font-weight: bold; text-decoration: underline;"><br><br>What's this FAQ about?</span><br><br>	Really it's a misnomer, since as of this moment no Dead Souls 2.x<br>admins exist, but the FAQ format is a convenient one, so I'll<br>run with it.<br><br>	The point of this document is to orient a new admin in<br>Dead Souls 2. Starting a MUD with a lib that is completely new to<br>you is confusing and can be discouraging. Hopefully this FAQ will<br>make the experience less difficult.<br><br><span style="font-weight: bold; text-decoration: underline;">How do I start?</span><br><br>	Start by reading the <a href="http://dead-souls.sourceforge.net/ds-faq.html">Dead Souls FAQ</a> for some background<br>on where this lib came from and what you can do with it.<br><br><span style="font-weight: bold; text-decoration: underline;">Ok, I read it. Now what?</span><br><br>	Presumably you have downloaded the most current Dead Souls<br>mudlib version and have installed it. If so, right now you <br>may be standing in the Dead Souls "start room", confused and<br>daunted. I'm going to assume you have some basic MUD experience<br>and knowledge...I'm not going to waste your time telling you about<br>traveling north or south, etc. If you <span style="font-style: italic;">do</span> need such a tutorial, <br>try <a href="http://jrong.tripod.com/mudstart.html">http://jrong.tripod.com/mudstart.html</a> or <a href="http://www.clock.org/muds/mres/mfaq.html">http://www.clock.org/muds/mres/mfaq.html</a><br>or <a href="http://www.vpg.vil.ee/%7Emichael/MUD_tutorial/toc.html">http://www.vpg.vil.ee/~michael/MUD_tutorial/toc.html</a><br><br>	In Dead Souls you have a body, just like other<br>players. You have available to you all the commands of a <br>creator, as well as all administrative commands. Type<br><span style="font-weight: bold;">cd</span> to move to your home directory, then <span style="font-weight: bold;">ls</span> to display its<br>contents. That's your own private work folder, which contains<br>your workroom and your personal area. We'll get to that stuff<br>later. For now type <span style="font-weight: bold;">home</span> to go to your workroom.<br><br>	Now <span style="font-weight: bold;">cd /</span> and <span style="font-weight: bold;">ls</span> to view the top level directory. The<br>list may be largely meaningless to you, so let's review it here:<br><br>cfg/<br><br>General configuration files for timezone and such.<br><br>cmds/<br><br>Main location of commands that don't require special access<br>privileges. Commands are different from verbs in that they tend<br>not to manipulate your environment, but rather deal with <br>the player's relationship to the system and/or files.<br><br><br>daemon/<br><br>Daemons are files that provide access to data files in an<br>organized way. For example, adding an occupational class <br>(like, say, assassin) to the game needs to be done in a<br>precise way in order for it not to break things. By sending<br>the data to the daemon first, you can be sure that the<br>new system configuration is entered properly. Daemons also<br>provide a means to access data, like "how much is silver<br>worth compared to gold", that is uniform across the mud, and <br>prevents accidental overwrites of data files by multiple<br>editors.<br><br><br>doc/<br><br>General documentation. <br><br><br>domains/<br><br>This is where MUD game areas go when they are complete<br>and ready for general play by the public. Once here, only<br>admins have write access to the files. <br><br><br>ftp/<br><br>The base for the MUD ftpd. Using the ftpd is probably dangerous<br>in terms of your system security, and I discourage it, but if<br>you are determined to have mud ftp access for your creators, <br>this is one way. See /secure/lib/net for the actual server. It<br>may or may not work. I won't support it.<br><br><br>include/<br><br>Include files provide a set of constants for your files. For<br>example, if you include &lt;damage_types.h&gt;, you can specify in<br>the code for your chainmail that it protects against<br>the damage type "BLADE" at a certain level.<br><br><br>lib/<br><br>This is the heart of the Dead Souls lib. This is the location<br>of the files that your objects, be they swords, shoes, or <br>handguns, will use as their configuration base. <br><br><br>log/<br><br>Log files.<br><br><br>news/<br><br>Announcements are made here. For example, in /news/creator<br>you can post a notice that you have added a teleportation<br>spell, and when your creators log on, they will see the message.<br><br><br>obj/<br><br>Legacy directory. Mostly unused.<br><br><br>open/<br><br>Legacy directory. Kept for compatibility. Historically this<br>directory has served as a place where creators can put code<br>for others to freely modify.<br><br><br>realms/<br><br>This is where creator home directories are.<br><br><br>save/<br><br>Files that describe properties of the MUD's systems live<br>here. The number of limbs that a bat has, for example, <br>is in races.o. In classes.o you'll find the skill ranges<br>for fighters. Do not edit these files. They must be<br>modified by daemons only, or you risk corrupting them.<br><br><br>secure/<br><br>This directory will be described in a separate section below.<br><br><br>shadows/<br><br>Shadows are a controversial feature of LPC. This directory<br>is designed for shadow objects, but they should be very<br>rarely, if ever used. Basically shadow objects are objects<br>that attach themselves to another object, intercepting<br>function calls. For obvious reasons this is a security <br>risk, so unless you really <span style="font-style: italic;">really</span> know what you're doing, <br>avoid them.<br><br><br>spells/<br><br>Pretty self explanatory. The spells daemon looks for spells here.<br><br><br>tmp/<br><br>A directory anyone can write to. Generally for swapping<br>data between objects, systems, or people.<br><br><br>verbs/<br><br>Another controversial topic. Verbs are a kind of command. For<br>example, <span style="font-weight: bold;">go</span> and <span style="font-weight: bold;">sit</span> and <span style="font-weight: bold;">open</span> are verbs. Specifically, verbs<br>are commands that interact with the user's environment. The<br>idea is that <span style="font-weight: bold;">throw my first red rock at the green goblin</span><br>should work, and should work the same everywhere on the<br>MUD. Verbs are a source of debate among some people, because<br>to folks accustomed to add_action commands, verbs seem<br>excessively complex.<br><br>www/<br><br>Like the ftp directory, but for the MUD webserver.<br><br><br>	Ok now let's take a quick look at the /secure directory: <span style="font-weight: bold;">ls /secure</span> <br>As you can see, /secure seems to have many of the same directories <br>that the root filesystem has. <br>	The reason a /secure directory is needed is that<br>there are files that should not be readable by everyone, and<br>there are files that must be writable only by a few. The MUD security<br>system uses the /secure directory as a means to control access to <br>such files.<br>	For example, the average creator has no business <br>accessing the player data files of other creators or players. Therefore<br>/secure/save/creators and /secure/save/players is offlimits to them.<br><br>	A directory without a counterpart in / is /secure/sefun. This<br>is where simulated external functions reside. So. Sefuns.<br><br></big><big>	First let me explain that the driver has built-in<br>functions that are available to the mud. For example,<br>type <span style="font-weight: bold;">eval return find_player("cratylus")</span> , but replace my name<br>with yours. Your player object pointer will be found and returned<br>to you (more or less. strictly speaking it's more complicated).<br>	The driver provides this function. Because it is "external"<br>to the mudlib, that is, it's in the driver and not the lib, <br>it is called an external function, or more commonly, "efun". The<br>idea is that certain actions you ask the mud to perform are<br>so common that they are made available MUD-wide.<br><br>	Efuns are ridiculously useful and powerful, and because<br>they are in the driver as compiled code, very fast. A near-complete<br>set of efun documentation is available in /doc/efun.<br><br>	However, the driver does not contain every possible<br>MUD-wide function you might want. For example, there is a <br>tell_object() efun, which lets you send a message to an object<br>such as a player. The syntax is something like this:<br><br>tell_object(find_player("cratylus"),"Hi.");<br><br>	Which doesn't look like much, but believe me, this<br>kind of stuff adds up. I wanted to make this simpler, so I<br>used what is called a sefun, or a simulated efun. It is<br>a function that is available lib-wide, but it isn't in<br>the driver. Instead it is provided by the lib itself (the<br>master daemon, specifically). By adding the appropriate code<br>in /secure/sefun/ I have now made available a tell_player() sefun,<br>which works like this:<br><br>tell_player("cratylus","Hi.")<br><br>	This simplification of code will become more obviously<br>useful to you as you get more coding under your belt.</big><br><big><br><br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">Whew! Ok now I know where stuff is. What's next?</span><br><br>	You probably want to examine how objects are written.<br>Type <span style="font-weight: bold;">goto /domains/town/room/road</span> and wander around town<br>a bit. If you want to see the code for something, for example,<br>the beggar, <span style="font-weight: bold;">about beggar</span> should do it, provided the beggar is<br>in the room.<br><br>	To see the filenames of the objects around you,<br>type scan here, or scan me to scan your own inventory. <br><br>	If you've never coded before, this is the hard part.<br>To understand what you're looking at when you run commands like <br><span style="font-weight: bold;">more /domains/town/weap/orcslayer.c</span> you need to get comfortable<br>with LPC. <br>	The brute force way of doing this is copying stuff<br>and then changing the descriptions, thus making new stuff.<br>This will work, but you'll waste time looking for examples of<br>exactly what you want to do..and you may not find them. <br>	Instead, learning LPC will let you create whatever<br>you want, without relying on templates.<br><br>	This means that now you must read the LPC Basic<br>manual, then the LPC Intermediate manual. As admin, your<br>creators will expect you to know what's in there.<br><br><a href="http://dead-souls.net/doc/basic">http://dead-souls.net/doc/basic</a><br><a href="http://dead-souls.net/doc/intermediate"><br>http://dead-souls.net/doc/intermediate</a><br><br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">Oh, man, you're kidding! Those are, like, books! Can't I</span><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">just start making stuff?</span><br>	<br>	Well...ok. But you need to go through the docs<br>soon, ok? In the meantime, there are some tools available<br>to help you crank out some stuff immediately, to get a feel<br>for things.<br><br>	Go to your workroom by typing <span style="font-weight: bold;">home </span>, then <span style="font-weight: bold;">open chest</span> .<br>Then type look in chest and <span style="font-weight: bold;">get</span> <span style="font-weight: bold;">makers from chest</span> . You<br>now have a thing maker and a room maker in your possession.<br>The room maker is a pretty stable product. The thing<br>maker is still very alpha as of this writing. Use it<br>at your own risk. To start the room maker, type <span style="font-weight: bold;">rmake</span> . To<br>start the thingmaker type <span style="font-weight: bold;">tmake</span> .<br><br>	The makers will default to saving stuff in your<br>area/ directory, so once you save a room, type <span style="font-weight: bold;">cd area/room</span> .<br><br><big><big style="font-style: italic;">Remember that you have to save your rooms and objects with a .c<br>at the end, otherwise they won't load.</big></big><br>	<br>Let's say you saved a room called testroom.c. You<br>can now exit the maker, type <span style="font-weight: bold;">update testroom.c</span> , then<br><span style="font-weight: bold;">goto testroom</span> . Voila. You are in your very first room.<br><br>	You can also load rooms you previously made with the<br>room maker. Just be aware of something very important: if you<br>hand edit files created by the room maker, they may no <br>longer load correctly on the room maker.<br><br>	The thing maker is a much more wobbly product, but<br>you can use it to crank out simple objects. Loading <br>objects into it doesn't work, and because it is a much more<br>complicated thing to create different kinds of objects, it<br>is possible to create broken objects with the thing maker.<br><br><br>	But really, you need to read the LPC files, <br> /doc/ed.txt , and /doc/basics.txt<br><br>	Other useful tools in your chest are a remote<br>control and a medical tricorder. <br><br style="font-weight: bold; text-decoration: underline;"><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">I want to invite my friends to help me code. How do I</span><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">promote them to creator status?</span><br><br>	As admin, you have access to the admintool<br>command. This opens a menu-driven admin system you<br>can use to manage some basic aspects of your new MUD.<br><br>	Everything on admintool can be done with<br>commands, system calls, or file editing, but until<br>you get the hang of all that stuff, admintool<br>is a convenient shortcut. <br>	In this example, you would type: <span style="font-weight: bold;">admintool</span> , <br>then select option <span style="font-weight: bold;">3</span>, then option <span style="font-weight: bold;">l</span> (that's a lowercase "L").<br><br>	The oldfashioned way, if the new creator<br>were named dude, would be: <span style="font-weight: bold;">encre dude</span><br><br>	I know. But people like menus, so I made it.<br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">What about intermud? How do I talk on that?</span><br><br>	The intermud3 (or i3) network is available<br>to you, and you are probably already connected to it. Type<br><span style="font-weight: bold;">mudlist</span> to see a list of other muds on the network.<br><br>	To enable intergossip and intercre, read<br>/doc/README for instructions.<br><br>	Please note that intercre is where you ask coding<br>and technical questions only. Random chatting is not<br>tolerated on that channel.<br><br>	Conversely, intergossip is mostly chat. Please<br>be warned that discussions on intergossip are usually <br>offensive, argumentative, and generally hostile. <br>	This hostility is especially sharp when you<br>are identified as a "newbie". You will almost certainly<br>be mocked and insulted no matter what you say, but<br>especially if your first messages betray you as <br>ignorant of intergossip standards and traditions. I<br>strongly recommend you lurk on this channel for a few<br>days before saying anything.<br><br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">What's this about a manual on Frontiers?</span><br><br>	It's no longer relevant. All the docs<br>we were making available on Frontiers are now included<br>in Dead Souls, starting from version 1.9r9.<br><br>	In your workroom is a chest. Open the<br>chest and the new Dead Souls Creator's Manual is<br>inside. The text files are in /doc/manual .<br><br>	If your Dead Souls version is below 1.9r9, to<br>access these docs you'll need to connect to Frontiers<br>and pick up a Creator's Manual, which contains the<br>build documentation you can use until you upgrade<br>to a current version of the lib.<br><br>	This has been made extra easy for you by implementing<br>a telnet room, just north of the default start room. Just<br>go north to the telnet room and type <span style="font-weight: bold;">connect</span>, and you'll be <br>connected to Frontiers. Create a player character,<br>then go north, east, east, north. You'll be in Kim's<br>bookstore. Now <span style="font-weight: bold;">buy manual from kim</span>. Type <span style="font-weight: bold;">index</span> to see<br>the available chapters. To read chapter 1, type <span style="font-weight: bold;">chapter 1</span>.<br>To read chapter 20, type: <span style="font-weight: bold;">chapter 20</span>.<br><br>	To leave frontiers (if you connected through the<br>telnet room) type: dcon.<br><br><br><span style="font-weight: bold; text-decoration: underline;">Anything else I should know?</span><br><br>	Read the docs.<br><br>	Even on intercre, which is generally not<br>rude, people can get snippy if they think you are being<br>lazy in your questions. <br><br>	Take a look at <a href="http://www.catb.org/%7Eesr/faqs/smart-questions.html">http://www.catb.org/~esr/faqs/smart-questions.html</a><br>to understand how this works. It's not a MUD thing, it's true for<br>technical fora in general.<br><br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">How do I add limbs to a race?</span><br><br>Edit /secure/cfg/races/&lt;race&gt;, then remove the race from the<br>races daemon, then add re-add the race. If you want players<br>to be able to play as this race, make sure you add the<br>numeral 1 on the addrace command. For example:<br><br><span style="font-weight: bold;">addrace jabberwock 1</span><br><br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">How do I make my friend an admin?</span><br><br>Edit /secure/cfg/groups, and add their username to the ASSIST<br>group. Reboot the mud. This should give them all the access they need.<br><br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">I don't like how the who command output looks! How can I change it?</span><br><br>Believe it or not, I actually get questions like this. I also<br>get stuff like "my workroom is broken! fix it!"<br><br>	If there is something broken about the lib itself, such as<br>an insta-death bug or a command that crashes the mud, I am<br>happy and eager to hear about it, so I can implement the fix<br>in the next lib release.<br>	However, if the problem you're having is that the lib,<br>by design, behaves in a way not to your liking, this isn't something<br>I'm likely to "fix" for you. For example, if you want a "<span style="font-weight: bold;">who</span>"<br>command with a cooler look, that's up to you to make. You're<br>the one coding a mud, so you need to take it upon yourself to<br>understand the code and modify it to suit your tastes.<br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">All I did was change one thing in a file, and now it won't update. Help!</span><br><br>	You should make it a habit to make backup copies of files<br>before editing them. That way, if you screw up the code, you can<br>just copy the backup to the original filename.<br><br>	If you are using Windows, you need to be aware of the<br>linefeed problem. unix text files and DOS text files have different<br>formatting. If you edit files in Notepad, then try to update them,<br>you may find that the file no longer updates, no matter what<br>you do. The difference is usually invisible to you, so you can't<br>tell why a file that looks exactly the same as before now won't<br>work.<br><br>	Dead Souls expects unix-formatted text, and if you feed it<br>something else, the results aren't likely to be to your<br>satisfaction. Make sure you use an editor that respects unix<br>text. In Windows 2000, WordPad seems to do a reasonable job of not<br>completely screwing things. It does, however, add carriage<br>returns to your lines, so when you look at them in ed, you'll<br>see a bunch of "<span style="font-weight: bold;">^M</span>" all over the place.<br><br>	Finally, if you're sure it isn't a text compatibility problem,<br>you need to examine the error output to hunt down the source of<br>the error. The <span style="font-weight: bold;">elog</span> command is invaluable for this.<br><br>	If the file is in your home directory, just type: <span style="font-weight: bold;">elog</span> .<br>This will provide you a listing of the last few lines of your personal<br>error log. Warning lines tell you about code that works but should<br>be fixed in some way. Lines that don't contain the word "Warning" are<br>error lines: they indicate something about your code that prevents<br>it from working. For example:<br><br></big></pre>
<hr style="width: 100%; height: 2px;">&gt; <span style="font-weight: bold;">update sample_room</span><br>
<pre><big><span style="font-style: italic;">---</span><br style="font-style: italic;"><span style="font-style: italic;">*Error in loading object '/realms/cratylus/area/room/sample_room'</span><br style="font-style: italic;"><span style="font-style: italic;">Object: /secure/cmds/creators/update at line 118</span><br style="font-style: italic;"><br style="font-style: italic;"><span style="font-style: italic;">'&lt;function&gt;' at /secure/save/creators/c/cratylus (&lt;function&gt;) at /:0</span><br style="font-style: italic;"><span style="font-style: italic;">'cmdAll' at /secure/save/creators/c/cratylus (/lib/command.c) at line 80</span><br style="font-style: italic;"><span style="font-style: italic;">'cmd' at /secure/cmds/creators/update at line 82</span><br style="font-style: italic;"><span style="font-style: italic;">'eventUpdate' at /secure/cmds/creators/update at line 118</span><br style="font-style: italic;"><span style="font-style: italic;">'CATCH' at /secure/cmds/creators/update at line 118</span><br style="font-style: italic;"><span style="font-style: italic;">Trace written to /log/catch</span><br style="font-style: italic;"><span style="font-style: italic;">/realms/cratylus/area/room/sample_room: Error in update</span><br style="font-style: italic;"><span style="font-style: italic;">*Error in loading object '/realms/cratylus/area/room/sample_room'<br></span></big></pre>
<hr style="width: 100%; height: 2px;">
<pre><big><span style="font-style: italic;"><br></span><br>	This output lets you know something is wrong, but<br>isn't very specific as to exactly what. If you look at your error<br>log, you probably will see something more detailed and helpful:<br><br><br></big></pre>
<hr style="width: 100%; height: 2px;">&gt; <span style="font-weight: bold;">elog</span><br>
<pre><big><span style="font-style: italic;">/log/errors/cratylus:</span><br style="font-style: italic;"><br style="font-style: italic;"><span style="font-style: italic;">/realms/cratylus/area/room/sample_room.c line 20: Undefined variable 'Sample' before );</span><br style="font-style: italic;"><span style="font-style: italic;">/realms/cratylus/area/room/sample_room.c line 20: parse error before );<br></span></big></pre>
<hr style="width: 100%; height: 2px;">
<pre><big><span style="font-style: italic;"><br></span><br>	Now you can see that the error is my syntax on<br>line 20. It turns out that I forgot to put quotes around the room name, <br>so the parser tried to use it as a variable, which, of course, it couldn't.<br><br>	If the file in question is in /secure, you'd type <span style="font-weight: bold;">elog secure</span> , or if<br>it's in /cmds, <span style="font-weight: bold;">elog cmds</span> , and so on.<br><br><br>	You may have to examine the catch and runtime error logs, too. You<br>can do so by running these commands:<br><br style="font-weight: bold;"><span style="font-weight: bold;">tail /log/catch</span><br style="font-weight: bold;"><span style="font-weight: bold;">tail /log/runtime<br><br></span><br><span style="font-weight: bold; text-decoration: underline;">The mud editor is confusing the heck out of me. It's too hard to use.</span><br><br>Check out the <a href="http://dead-souls.sourceforge.net/editor.html">MUD Editor tutor</a><a href="http://dead-souls.sourceforge.net/editor.html">ial</a>. It should ease the pain a little.<br><br><br style="font-weight: bold; text-decoration: underline;"><span style="font-weight: bold; text-decoration: underline;">I found a bug. For real. Can you please fix it?</span><br><br>Email me: &lt;put my name here&gt;@users.sourceforge.net<br><br>Please include a detailed description of the bug, and the exact<br>error text and commands that produced it. A log file or<br>screencap would be appropriate.<br><br><br></big></pre>
<big>
</big>- Cratylus<br>
<br>
<a href="http://dead-souls.sourceforge.net/">Dead Souls Homepage</a><br>
</body></html>